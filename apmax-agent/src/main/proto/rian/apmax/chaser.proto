syntax = "proto3";
option java_multiple_files = true;
option java_package = "kr.co.rian.apmax.agent.chaser";

package rian.apmax;

import public "rian/apmax/commons.proto";

service ChaserService {
  rpc collectWeb(WebChaser) returns (Noop);
  rpc collectDb(DbChaser) returns (Noop);
}

message DbChaser {
  string id = 1;
  int64 timestamp = 2;
  string sql = 3;
  map<string, string> parameters = 4;
  string error = 5;
}

message WebChaser {
  string id = 1;
  int64 timestamp = 2;
  string uri = 3;
  map<string, string> parameters = 4;
  map<string, string> headers = 5;
  repeated Stack stacks = 6;
  string error = 7;

  message Stack {
    string signature = 1;
    int32 elapsed = 2;
  }
}


